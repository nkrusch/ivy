import { Callout } from "nextra/components";

# ThingsBoard Setup

1. Setup ThingsBoard, according to the ThingsBoard documentation: https://thingsboard.io/docs/
2. In the Thingsboard dashboard, create a new "device" (under "entities")
3. Use the "device id" generated by Thingsboard in the fiels `general.system_identifier`:

TODO: picture of "get client ID"

4. Set up the MQTT credentials. Username and password can be as you like, _MQTT Client ID_ has to be the same as the _Thingsboard client ID_.

TODO: picture of MQTT setup

5. Use the `config.default.json` file to create a `config.json` file on your sensor node. Set `general.config_revision` to `-1` and `general.system_identifier` to the system identifier you received from Thingsboard.

   ```json
   {
     "general": {
        "config_revision": -1,
        "software_version": "1.0.0",
        "system_identifier": "ab12cd..."
     },
     "backend": {
       "provider": "tenta",
       "mqtt_connection": ...
     },
   }
   ```

6. You can publish new configurations with Thingsboard using "shared attributes". Here you have to keep track of the revision number yourself â€“ as opposed to Tenta. Whenever you update the configuration here, the respective client will receive it. It will only update to configurations with a higher revision number.

TODO: picture of shared attributes

<Callout emoji="ðŸ’¡" type="info">
  In [Hermes](https://github.com/tum-esm/hermes), we solved these initial steps
  with setup script for each Raspberry Pi that put an initial config with a
  sensor identifier on the device and published this initial config to Tenta.
</Callout>

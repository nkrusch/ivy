import {
    StateSchema,
} from '../../components/schema-renderers';

# State

### What is the State?

The state is the internal mechanism of communicating between procedures and with the mainloop. I.e. procedure A can periodically write some of its results into the state and all other procedures can access it and act accordingly.

For example, one procedure is catching signals from a UPS about low battery state and write that into the state. A calibration procedure could react to that by only doing measurements when the battery is higher than a certain threshold.

## How to access it

The state is stored at `data/state.json`, but you can simply use the `StateInterface` to interact with it from the codebase:

```python
import src

# read the state
state = src.utils.StateInterface.load()

# update the state
with src.utils.StateInterface.update() as state:
    state.system.last_boot_time = last_boot_time
    state.system.last_5_min_load = load_last_5_min
```

## State Schema

<StateSchema/>